@extends('layout.app')

@section('content')
    {{-- üîÑ LOADING SCREEN --}}
    {{-- <div id="ebookLoader">
        <div class="loader-box">
            <div class="spinner"></div>
            <p>Loading ebook‚Ä¶</p>
        </div>
    </div> --}}


    <div class="container-fluid vh-0 d-flex flex-column">

        {{-- üìò EBOOK TITLE --}}
        <div class="row">
            <div class="col-12 text-start py-2">
                <a href="{{ route('ebooks.index') }}" class="btn btn-dark back-btn">
                    ‚Üê Back
                </a>
                <h2 class="title mb-0">{{ $ebook->title }}</h2>
            </div>
        </div>

        {{-- üìï VIEWER AREA (RED BOX TARGET) --}}
        <div class="row flex-grow-1">
            <div class="col-12 d-flex justify-content-center align-items-center">

                {{-- VIEWER WRAPPER --}}
                <div id="viewer-wrapper" class="mb-6">

                    {{-- üîù TOP TOOLBAR --}}
                    <div class="viewer-toolbar position-absolute top-0 end-0 m-3">
                        <button id="zoomIn">+</button>
                        <button id="zoomOut">‚àí</button>
                        <button id="zoomReset">‚ü≥</button>
                        <button id="fullscreenToggle">‚õ∂</button>
                    </div>

                    {{-- üîë ZOOM + FLIPBOOK --}}
                    <div id="zoom-wrapper" class="position-relative">
                        <div id="ebook-scale">
                            {{-- FLIPBOOK --}}
                            <div id="flipbook">

                                {{-- ‚úÖ COVER PAGE --}}
                                @if (!empty($pages) && isset($pages[0]))
                                    <div class="page cover">
                                        <img src="{{ $pages[0] }}" alt="Cover">
                                    </div>
                                @endif

                                {{-- ‚úÖ INNER PAGES --}}
                                @foreach ($pages as $index => $img)
                                    @if ($index !== 0)
                                        <div class="page">
                                            <img src="{{ $img }}" alt="Page {{ $index + 1 }}">
                                        </div>
                                    @endif
                                @endforeach

                            </div>
                        </div>
                        {{-- ‚¨ÖÔ∏è‚û°Ô∏è SIDE NAV --}}
                        <div class="ebook-side-nav">
                            <button class="side-btn prev" id="prevPage">
                                <img src="{{ asset('images/back.png') }}" alt="Previous">
                            </button>

                            <button class="side-btn next" id="nextPage">
                                <img src="{{ asset('images/share.png') }}" alt="Next">
                            </button>
                        </div>

                    </div>
                </div>

            </div>
        </div>

        {{-- üîä PAGE TURN SOUND --}}
        <audio id="flipSound" src="{{ asset('sound/pageflip.mp3') }}" preload="auto"></audio>

    </div>

    {{-- ‚úÖ REQUIRED JS --}}
    {{-- <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<script src="{{ asset('js/turn.min.js') }}"></cript>
<script src="{{ asset('js/script.js') }}"></script> --}}
@endsection
